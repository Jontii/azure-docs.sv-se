---
title: BYOL VM sårbarhets bedömning i Azure Security Center
description: Distribuera en lösning för BYOL sårbarhets bedömning på Azure Virtual Machines för att få rekommendationer i Azure Security Center som kan hjälpa dig att skydda dina virtuella datorer.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: how-to
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/13/2020
ms.author: memildin
ms.openlocfilehash: e35e7fc9b7202db0c1abc9c94ff0b22e86526daf
ms.sourcegitcommit: 090ea6e8811663941827d1104b4593e29774fa19
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/13/2020
ms.locfileid: "91999538"
---
# <a name="deploy-a-bring-your-own-license-byol-vulnerability-assessment-solution"></a>Distribuera en BYOL-lösning för sårbarhets bedömning (ta med din egen licens)

Om du har aktiverat **Azure Defender för-servrar**kan du använda Azure Security Center inbyggda verktyget för sårbarhets bedömning enligt beskrivningen i [integrerad sårbarhets-skanner för virtuella datorer](built-in-vulnerability-assessment.md). Det här verktyget är integrerat i Azure Defender och kräver inte några externa licenser – allt hanteras sömlöst i Security Center. Dessutom stöder den integrerade skannern Azure Arc-aktiverade datorer.

Alternativt kanske du vill distribuera en egen privat licensierad lösning för sårbarhets bedömning från [Qualys](https://www.qualys.com/lp/azure) eller [Rapid7](https://www.rapid7.com/products/insightvm/). Du kan installera en av dessa partner lösningar på flera virtuella datorer som tillhör samma prenumeration (men inte till Azure Arc-aktiverade datorer).

## <a name="availability"></a>Tillgängligt

|Aspekt|Information|
|----|:----|
|Versions tillstånd:|Allmänt tillgänglig (GA)|
|Dator typer (hybrid scenarier):|![Ja](./media/icons/yes-icon.png) Virtuella Azure-datorer<br>![Inga](./media/icons/no-icon.png) Azure Arc-aktiverade datorer|
|Priset|Kostnadsfri|
|Nödvändiga roller och behörigheter:|**Resurs ägaren** kan distribuera skannern<br>**Säkerhets läsare** kan visa resultat|
|Moln|![Ja](./media/icons/yes-icon.png) Kommersiella moln<br>![Inga](./media/icons/no-icon.png) National/suverän (US Gov, Kina gov, andra gov)|
|||


## <a name="deploy-a-byol-solution-from-the-azure-portal"></a>Distribuera en BYOL-lösning från Azure Portal

BYOL-alternativen avser lösningar för sårbarhets bedömning från tredje part som stöds. För närvarande stöds providers för både Qualys och Rapid7.

Lösningar som stöds rapporterar sårbarhets data till partnerns hanterings plattform. I sin tur tillhandahåller plattformen sårbarhets-och hälso övervaknings data till Security Center. Du kan identifiera sårbara virtuella datorer på Security Center instrument panelen och växla till partner hanterings konsolen direkt från Security Center för ytterligare rapporter och information.

1. Öppna **Security Center**från [Azure Portal](https://azure.microsoft.com/features/azure-portal/).

1. Från Security Center menyn öppnar du sidan **rekommendationer** .

1. Välj rekommendationen **en lösning för sårbarhets bedömning ska vara aktive rad på dina virtuella datorer**.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="Grupperingarna av datorerna i * * en lösning för sårbarhets bedömning ska vara aktiverade på sidan Virtual Machines * * rekommendation" lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    De virtuella datorerna kommer att visas i en eller flera av följande grupper:

    * **Felfria resurser** – Security Center har identifierat en lösning för sårbarhets bedömning som körs på dessa virtuella datorer.
    * Resurser som inte är **felfria** – ett säkerhets söknings tillägg kan distribueras till dessa virtuella datorer. 
    * **Ej tillämpliga resurser** – de virtuella datorerna får inte ha ett tillägget för sårbarhets öknings tillägg distribuerat.

1. I listan med datorer som inte är felfria väljer du de som ska få en lösning för sårbarhets bedömning och väljer **åtgärda**.

    >[!IMPORTANT]
    > Beroende på din konfiguration kan du bara se en delmängd av den här listan. 
    >
    > - Om du inte har konfigurerat en sårbarhets-skanner från en tredje part, erbjuds du inte möjligheten att distribuera den.
    > - Om de valda virtuella datorerna inte är skyddade med Azure Defender är alternativet ASC Integrated sårbarhet scanner inte tillgängligt.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options.png" alt-text="Grupperingarna av datorerna i * * en lösning för sårbarhets bedömning ska vara aktiverade på sidan Virtual Machines * * rekommendation":::

1. Om du ställer in en ny BYOL-konfiguration väljer du **Konfigurera en ny tredjeparts sårbarhets-skanner**, väljer **Fortsätt**och anger informationen från providern på följande sätt:

    1. För **resursgrupp**, väljer du **använd befintlig**.
    1. För **plats**, väljer du vart lösningen befinner sig geografiskt.
    1. För Qualys anger du den licens som tillhandahålls av Qualys i fältet **licens kod** .
    1. För Rapid7 laddar du upp **konfigurations filen Rapid7**.
    1. I rutan **offentlig nyckel** anger du information om den offentliga nyckeln som tillhandahålls av partnern.
    1. Om du vill installera denna sårbarhets bedömnings Agent automatiskt på alla identifierade virtuella datorer i prenumerationen på den här lösningen väljer du **automatisk distribution**.
    1. Välj **OK**.

1. Om du redan har konfigurerat din BYOL-lösning väljer du **distribuera din konfigurerade sårbarhets läsare från tredje part**och **fortsätter**.

När lösningen för sårbarhets bedömning är installerad på mål datorerna utför Security Center en sökning för att identifiera och identifiera sårbarheter i systemet och programmet. Det kan ta ett par timmar för den första genomsökningen att slutföras. Efter det körs det varje timme.



## <a name="deploy-a-byol-solution-using-powershell-and-the-rest-api"></a>Distribuera en BYOL-lösning med PowerShell och REST API

Om du vill program mässigt distribution av en egen privat licensierad lösning för sårbarhets bedömning från [Qualys](https://www.qualys.com/lp/azure) eller [Rapid7](https://www.rapid7.com/products/insightvm/)använder du den angivna skript [PowerShell-> sårbarhets lösning](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). Det här skriptet använder REST API för att skapa en ny säkerhets lösning i ASC. Du behöver en licens och en nyckel som tillhandahålls av din tjänst leverantör (Qualys eller Rapid7).

> [!IMPORTANT] 
> Det går bara att skapa en lösning per licens. Försök att skapa en annan lösning med samma namn/licens/nyckel kommer att Miss lyckas.

### <a name="prerequisites"></a>Förutsättningar

Nödvändiga PowerShell-moduler:

- Installera-modul AZ
- Installera-modul AZ. Security

### <a name="run-the-script"></a>Kör skriptet

Om du vill köra skriptet behöver du relevant information för parametrarna nedan.

| **Parameter** | **Obligatoriskt** | **Kommentarer** |
|----|:----:|----|
|**SubscriptionId**|✔|SubscriptionID för den Azure-prenumeration som innehåller de resurser som du vill analysera.|
|**ResourceGroupName**|✔|Resursgruppens namn. Använd alla befintliga resurs grupper, inklusive standard ("DefaultResourceGroup-XXX"). Eftersom lösningen inte är en Azure-resurs visas den inte under resurs gruppen, men den är fortfarande kopplad till den.|
|**vaSolutionName**|✔|Namnet på den nya lösningen.|
|**vaType**|✔|Qualys eller Rapid7.|
|**licenceCode**|✔|Licens sträng för leverantör angiven.|
|**publicKey**|✔|Leverantören tillhandahöll offentlig nyckel.|
|**autoupdater**|-|Aktivera (sant) eller inaktivera (falskt) automatisk distribution för den här VA-lösningen. När den är aktive rad försöker varje ny virtuell dator i prenumerationen automatiskt att länka till lösningen.<br/>(Standard: falskt)|
||||

Syntax:

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Exempel (det här exemplet innehåller ingen giltig licens information):

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```

## <a name="next-steps"></a>Nästa steg

> [!div class="nextstepaction"]
> [Åtgärda resultaten från din lösning för sårbarhets bedömning](remediate-vulnerability-findings-vm.md)


Security Center erbjuder även sårbarhets analys för din:

- SQL-databaser – Se [utforska rapporter om sårbarhets bedömning på instrument panelen för sårbarhets bedömning](defender-for-sql-usage.md#explore-vulnerability-assessment-reports)
- Azure Container Registry avbildningar – se [använda Azure Defender för behållar register för att söka igenom dina avbildningar efter sårbarheter](defender-for-container-registries-usage.md)